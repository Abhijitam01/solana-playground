[
  {"line":1,"type":"macro","summary":"Import Anchor prelude types and macros.","why":"Provides Context, Result, and account types.","concepts":["Anchor"]},
  {"line":2,"type":"macro","summary":"Begin importing Token Metadata CPI helpers.","why":"Needed to call metadata update instructions.","concepts":["Metadata","CPI"]},
  {"line":3,"type":"macro","summary":"Bring the metadata module into scope.","concepts":["Rust Modules"]},
  {"line":4,"type":"macro","summary":"Import the CPI helper for update_metadata_accounts_v2.","concepts":["CPI","Metadata"]},
  {"line":5,"type":"macro","summary":"Import the Metadata program type.","concepts":["Metadata"]},
  {"line":6,"type":"macro","summary":"Import the DataV2 metadata payload type.","concepts":["Metadata"]},
  {"line":7,"type":"macro","summary":"End metadata imports block.","concepts":["Rust Modules"]},
  {"line":9,"type":"macro","summary":"Declare the program ID for this program.","why":"Solana uses this ID to route instructions.","risk":"Program will not compile without a declared ID.","concepts":["Program ID"]},
  {"line":11,"type":"macro","summary":"Mark the module as the Anchor program entry point.","why":"Anchor generates instruction dispatch from this module.","concepts":["Instructions"]},
  {"line":12,"type":"instruction","summary":"Define the program module namespace.","concepts":["Program Structure"]},
  {"line":13,"type":"logic","summary":"Bring parent module symbols into scope.","concepts":["Rust Modules"]},

  {"line":15,"type":"instruction","summary":"Start the update_metadata instruction signature.","concepts":["Instructions"]},
  {"line":16,"type":"account","summary":"Provide the accounts context for the update.","why":"Anchor validates these accounts before execution.","concepts":["Accounts"]},
  {"line":17,"type":"logic","summary":"Metadata name input parameter.","concepts":["Metadata"]},
  {"line":18,"type":"logic","summary":"Metadata symbol input parameter.","concepts":["Metadata"]},
  {"line":19,"type":"logic","summary":"Metadata URI input parameter.","concepts":["Metadata"]},
  {"line":20,"type":"instruction","summary":"Finish the instruction signature and return type.","concepts":["Result"]},

  {"line":21,"type":"logic","summary":"Begin constructing the DataV2 payload.","why":"Defines the metadata fields to update.","concepts":["Metadata"]},
  {"line":22,"type":"logic","summary":"Set the metadata name.","concepts":["Metadata"]},
  {"line":23,"type":"logic","summary":"Set the metadata symbol.","concepts":["Metadata"]},
  {"line":24,"type":"logic","summary":"Set the metadata URI.","concepts":["Metadata"]},
  {"line":25,"type":"logic","summary":"Set seller fee to 0 basis points.","concepts":["Metadata"]},
  {"line":26,"type":"logic","summary":"No creators specified.","concepts":["Metadata"]},
  {"line":27,"type":"logic","summary":"No collection specified.","concepts":["Metadata"]},
  {"line":28,"type":"logic","summary":"No usage settings specified.","concepts":["Metadata"]},
  {"line":29,"type":"logic","summary":"End the metadata payload.","concepts":["Metadata"]},

  {"line":31,"type":"logic","summary":"Begin CPI to update the metadata account.","why":"Only the Metadata program can update metadata.","concepts":["CPI","Metadata"]},
  {"line":32,"type":"logic","summary":"Create a CPI context with program and accounts.","concepts":["CPI"]},
  {"line":33,"type":"account","summary":"Pass the Token Metadata program account.","concepts":["Metadata"]},
  {"line":34,"type":"account","summary":"Begin CPI accounts struct for update.","concepts":["CPI"]},
  {"line":35,"type":"account","summary":"Metadata account to update.","concepts":["Metadata"]},
  {"line":36,"type":"account","summary":"Update authority signer.","why":"Only the update authority can change metadata.","concepts":["Authority","Signer"]},
  {"line":37,"type":"logic","summary":"End CPI accounts struct.","concepts":["CPI"]},
  {"line":38,"type":"logic","summary":"End CPI context construction.","concepts":["CPI"]},
  {"line":39,"type":"logic","summary":"Keep the existing update authority.","concepts":["Authority"]},
  {"line":40,"type":"logic","summary":"Provide the new metadata payload.","concepts":["Metadata"]},
  {"line":41,"type":"logic","summary":"Mark metadata as mutable.","concepts":["Metadata"]},
  {"line":42,"type":"logic","summary":"No collection details provided.","concepts":["Metadata"]},
  {"line":43,"type":"logic","summary":"Execute CPI and propagate errors.","concepts":["CPI","Error Handling"]},

  {"line":45,"type":"macro","summary":"Log successful update.","concepts":["Logs"]},
  {"line":46,"type":"logic","summary":"Return success from update_metadata.","concepts":["Result"]},
  {"line":47,"type":"logic","summary":"End of update_metadata handler.","concepts":["Rust"]},
  {"line":48,"type":"logic","summary":"End of program module.","concepts":["Rust Modules"]},

  {"line":50,"type":"macro","summary":"Derive account validation for UpdateMetadata context.","concepts":["Accounts"]},
  {"line":51,"type":"account","summary":"Define accounts required to update metadata.","concepts":["Accounts"]},
  {"line":52,"type":"account","summary":"Mark metadata account as mutable.","concepts":["Metadata","Mutability"]},
  {"line":53,"type":"account","summary":"Unchecked metadata PDA account.","why":"Validated by the Metadata program during CPI.","concepts":["Metadata","PDA"]},
  {"line":54,"type":"account","summary":"Update authority signer.","concepts":["Authority","Signer"]},
  {"line":55,"type":"account","summary":"Token Metadata program account.","concepts":["Metadata"]},
  {"line":56,"type":"logic","summary":"End of UpdateMetadata accounts struct.","concepts":["Accounts"]}
]
