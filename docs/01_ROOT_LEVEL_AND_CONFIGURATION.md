# Documentation Part 1: Root Level & Configuration

This document covers all root-level files and folders in the Solana Playground monorepo.

## Root Directory Structure

```
solana-playground/
├── apps/              # Application services (web, api, runner)
├── packages/          # Shared packages
├── scripts/           # Utility scripts
├── node_modules/      # Root dependencies
├── package.json       # Root package configuration
├── pnpm-workspace.yaml # Workspace configuration
├── pnpm-lock.yaml     # Dependency lock file
├── turbo.json         # Turborepo configuration
├── docker-compose.yml # Docker orchestration
├── railway.toml       # Railway deployment config
├── README.md          # Project documentation
└── test-results.txt   # Test results output
```

---

## Root Files

### `package.json`
**Purpose**: Root package configuration for the monorepo.

**What it does**:
- Defines the workspace name: "solana-playground"
- Sets up Turborepo scripts (dev, build, lint, type-check, clean)
- Manages root-level devDependencies (turbo, typescript)
- Specifies package manager (pnpm@8.15.0) and Node.js version requirements

**If removed**: 
- The monorepo would lose its root configuration
- Turborepo commands would fail
- Package manager would not recognize this as a workspace

**Dependencies**:
- `turbo`: Build system for monorepo
- `typescript`: Type checking

---

### `pnpm-workspace.yaml`
**Purpose**: Defines the pnpm workspace structure.

**What it does**:
- Tells pnpm which directories contain packages
- Configures workspace patterns: `apps/*`, `packages/*`, `packages/*/*`
- Enables workspace protocol dependencies

**If removed**:
- pnpm would not recognize this as a workspace
- Workspace dependencies (`workspace:*`) would fail
- Package linking would break

---

### `pnpm-lock.yaml`
**Purpose**: Locks exact versions of all dependencies across the monorepo.

**What it does**:
- Ensures reproducible installs
- Tracks dependency tree and versions
- Prevents version conflicts

**If removed**:
- Dependency versions could vary between installs
- Builds might be inconsistent
- CI/CD could fail with version mismatches

---

### `turbo.json`
**Purpose**: Turborepo build system configuration.

**What it does**:
- Defines task pipelines (build, dev, lint, type-check, test, clean)
- Configures task dependencies (`dependsOn`)
- Sets output directories for caching
- Configures global dependencies (`.env.*local` files)

**Key configurations**:
- `build`: Depends on upstream builds, outputs `.next/**` and `dist/**`
- `dev`: No cache, persistent (runs indefinitely)
- `lint`: Depends on upstream lint
- `type-check`: Depends on upstream type-check
- `test`: Depends on upstream tests
- `clean`: No cache

**If removed**:
- Turborepo would not know how to run tasks
- Build pipeline would break
- Task dependencies would not be respected

---

### `docker-compose.yml`
**Purpose**: Docker orchestration for local development.

**What it does**:
- Defines three services: `api`, `runner`, and `web`
- Configures port mappings and environment variables
- Sets up service dependencies (web depends on api, api depends on runner)
- Exposes ports: 3000 (web), 3001 (api), 3002 (runner), 8899 (validator)

**Services**:
1. **api**: Express API service on port 3001
2. **runner**: Solana execution service on port 3002, validator on 8899
3. **web**: Next.js frontend on port 3000

**If removed**:
- `docker-compose up` would fail
- Local Docker development would not work
- Service orchestration would need manual setup

---

### `railway.toml`
**Purpose**: Railway.app deployment configuration.

**What it does**:
- Configures Railway to build using Dockerfile
- Points to `apps/runner/Dockerfile`
- Sets start command for runner service
- Configures health check endpoint (`/health`)
- Sets restart policy (on_failure, max 3 retries)

**If removed**:
- Railway deployment would use defaults
- May need manual configuration in Railway dashboard
- Health checks might not work properly

---

### `README.md`
**Purpose**: Project documentation and setup guide.

**What it does**:
- Explains project philosophy and architecture
- Documents features and templates
- Provides setup instructions
- Lists environment variables
- Explains OAuth configuration

**If removed**:
- New developers would lack setup instructions
- No documentation of project structure
- Missing environment variable reference

---

### `test-results.txt`
**Purpose**: Test results output file (generated).

**What it does**:
- Stores test execution results
- Used for CI/CD reporting

**If removed**:
- Test results would not be persisted
- CI/CD might lose test output
- Can be regenerated by running tests

---

## Root Directories

### `apps/`
**Purpose**: Contains all application services.

**Contents**:
- `web/`: Next.js frontend application
- `api/`: Express API service
- `runner/`: Solana program execution service

**If removed**:
- The entire application would be gone
- No frontend, API, or execution services

**See**: 
- Part 2: Web Application (`apps/web`)
- Part 3: API Service (`apps/api`)
- Part 4: Runner Service (`apps/runner`)

---

### `packages/`
**Purpose**: Shared packages used across applications.

**Contents**:
- `types/`: Shared TypeScript types and Zod schemas
- `solana/`: Solana program templates and metadata
- `db/`: Database client and schema definitions
- `auth/`: Authentication utilities (JWT, password hashing)
- `exercises/`: Exercise validation and types
- `config/`: Shared configurations (tsconfig, eslint, tailwind)
- `template-cli/`: CLI tool for template management

**If removed**:
- Applications would lose shared code
- Type definitions would be missing
- Database access would break
- Templates would be unavailable

**See**: Part 5: Shared Packages

---

### `scripts/`
**Purpose**: Utility scripts for development and maintenance.

**Contents**:
- `check-template-health.js`: Validates template structure and explanations
- `template-health-report.js`: Generates template health reports

**If removed**:
- Template validation scripts would be unavailable
- Health checks would need manual execution
- No automated template quality checks

**See**: Part 6: Scripts & Utilities

---

### `node_modules/`
**Purpose**: Root-level node_modules (minimal, mostly workspace dependencies).

**What it does**:
- Stores root-level dependencies (turbo, typescript)
- Managed by pnpm workspace

**If removed**:
- Can be regenerated with `pnpm install`
- Root dependencies would be missing until reinstall

---

## Environment Files (Not in repo, but referenced)

### `.env.local`, `.env.*local`
**Purpose**: Local environment variables (gitignored).

**What it does**:
- Stores sensitive configuration
- Referenced in `turbo.json` as global dependencies
- Used by all services

**If removed**:
- Services would use default values or fail
- API keys would be missing
- Database connections would break

---

## Summary

**Critical Files** (cannot remove):
- `package.json` - Root configuration
- `pnpm-workspace.yaml` - Workspace definition
- `turbo.json` - Build system config
- `pnpm-lock.yaml` - Dependency locking

**Important Files** (should not remove):
- `docker-compose.yml` - Local development
- `railway.toml` - Deployment config
- `README.md` - Documentation

**Generated/Regeneratable**:
- `node_modules/` - Can reinstall
- `test-results.txt` - Can regenerate
- `pnpm-lock.yaml` - Can regenerate (but not recommended)

**Directories**:
- `apps/` - Core applications (CRITICAL)
- `packages/` - Shared code (CRITICAL)
- `scripts/` - Utilities (useful but not critical)

